/* Adicionar usu√°rio */
DECLARE @SALT UNIQUEIDENTIFIER = NEWID();

INSERT INTO PERFIS (NOME, SOBRENOME, DATA_NASCIMENTO, EMAIL, COD_PERFIL, CPF, TIPO_USUARIO, TELEFONE)
VALUES (
	@NOME, 
	@SOBRENOME, 
	@DATA_NASCIMENTO, 
	@EMAIL, 
	@COD_PERFIL, 
	@CPF,
	(SELECT ID_TIPO FROM TIPOS_USUARIO WHERE TIPO = @TIPO_USUARIO),
	@TELEFONE,
);

INSERT INTO LOGIN_USUARIOS (SENHA, SALT, ID_PERFIL)
VALUES (
	HASHBYTES('SHA2_256', CONVERT(VARBINARY, CONVERT(NVARCHAR(36), @SALT) + @SENHA_USUARIO)),
	@SALT, 
	(SELECT ID_PERFIL FROM PERFIS WHERE COD_PERFIL = @COD_PERFIL)
);
